(function(e){function r(r){for(var t,s,o=r[0],c=r[1],l=r[2],h=0,u=[];h<o.length;h++)s=o[h],i[s]&&u.push(i[s][0]),i[s]=0;for(t in c)Object.prototype.hasOwnProperty.call(c,t)&&(e[t]=c[t]);f&&f(r);while(u.length)u.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,r=0;r<a.length;r++){for(var n=a[r],t=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(t=!1)}t&&(a.splice(r--,1),e=s(s.s=n[0]))}return e}var t={},i={app:0},a=[];function s(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,r,n){s.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,r){if(1&r&&(e=s(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)s.d(n,t,function(r){return e[r]}.bind(null,t));return n},s.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(r,"a",r),r},s.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},s.p="/perspective-transform/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=r,o=o.slice();for(var l=0;l<o.length;l++)r(o[l]);var f=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,r,n){e.exports=n("56d7")},"56d7":function(e,r,n){"use strict";n.r(r);n("cadf"),n("551c"),n("f751"),n("097d");var t=n("2b0e"),i=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("Perspective Transform")]),n("PerspectiveTransform")],1)},a=[],s=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",[n("canvas",{ref:"original",staticClass:"renderer"}),n("canvas",{ref:"preview",staticClass:"renderer"})])},o=[],c=n("75fc"),l=n("768b"),f=n("5a89"),h=n("23ee"),u=n("4721"),d=n("1775"),p=n.n(d),O=n("e59c"),v=n.n(O),m=n("f012"),g=n.n(m),w={name:"PerspectiveTransform",data:function(){return{canvasSize:{width:500,height:500},rendererOfOriginal:null,rendererOfPreview:null,sceneOfOriginal:null,sceneOfPreview:null,cameraOfOriginal:null,cameraOfPreview:null,imageMesh:null,previewMesh:null,cameraOptions:{fov:75,aspect:1,near:.1,far:1e3},cornerMeshes:[],orbitControls:null}},mounted:function(){this.createRenderer(),this.createScene(),this.createCamera(),this.createImageMesh(),this.createCornerMesh(),this.createHelper(),this.createTweakPane(),this.render()},methods:{createRenderer:function(){var e=this.canvasSize,r=e.width,n=e.height;this.rendererOfOriginal=new f["s"]({canvas:this.$refs.original,alpha:!0,antialias:!0}),this.rendererOfPreview=new f["s"]({canvas:this.$refs.preview,alpha:!0,antialias:!0}),this.rendererOfOriginal.setSize(r,n),this.rendererOfPreview.setSize(r,n)},createScene:function(){this.sceneOfOriginal=new f["n"],this.sceneOfPreview=new f["n"]},createCamera:function(){var e=this.canvasSize.height,r=this.cameraOptions,n=r.fov,t=r.aspect,i=r.near,a=r.far,s=new f["j"](n,t,i,a);s.position.z=e/2/Math.tan(f["f"].degToRad(n/2)),this.cameraOfOriginal=s.clone(),this.cameraOfPreview=s.clone(),this.sceneOfOriginal.add(this.cameraOfOriginal),this.sceneOfPreview.add(this.cameraOfPreview)},createImageMesh:function(){var e=new f["p"],r=e.load(g.a);r.minFilter=f["d"],r.magFilter=f["d"];var n=this.canvasSize,t=n.width,i=n.height,a=new f["h"](new f["a"](t,i,1),new f["i"]({map:r}));this.imageMesh=a.clone(),this.previewMesh=a.clone(),this.sceneOfOriginal.add(this.imageMesh),this.sceneOfPreview.add(this.previewMesh)},createCornerMesh:function(){var e=this,r=[[-100,-100],[100,-100],[100,100],[-100,100]];r.forEach(function(r){var n=Object(l["a"])(r,2),t=n[0],i=n[1],a=new f["h"](new f["a"](10,10,0),new f["i"]({color:"#00ff00"}));a.position.set(t,i,1),e.cornerMeshes.push(a),e.sceneOfOriginal.add(a)})},applyTransform:function(){var e=this.cornerMeshes.reduce(function(e,r){return[].concat(Object(c["a"])(e),[r.position.x,r.position.y])},[]),r=this.$refs.original.width/2,n=this.$refs.original.height/2,t=[-r,-n,r,-n,r,n,-r,n],i=v()(e,t),a=i.coeffs,s=Object(l["a"])(a,9),o=s[0],h=s[1],u=s[2],d=s[3],p=s[4],O=s[5],m=s[6],g=s[7],w=s[8],b=new f["g"];b.set(o,h,0,u,d,p,0,O,0,0,1,0,m,g,0,w),this.previewMesh.matrix=b,this.previewMesh.matrixAutoUpdate=!1},render:function(){this.applyTransform(),this.rendererOfOriginal.render(this.sceneOfOriginal,this.cameraOfOriginal),this.rendererOfPreview.render(this.sceneOfPreview,this.cameraOfPreview),requestAnimationFrame(this.render)},createHelper:function(){this.orbitControls=new u["a"](this.cameraOfOriginal,this.rendererOfOriginal.domElement),this.orbitControls.enabled=!1,new h["a"](this.cornerMeshes,this.cameraOfOriginal,this.rendererOfOriginal.domElement)},createTweakPane:function(){var e=this,r=new p.a,n=function(){var n=r.addFolder({title:"PerspectiveCamera"});n.addInput(e.cameraOptions,"fov"),n.addInput(e.cameraOptions,"aspect"),n.addInput(e.cameraOptions,"near"),n.addInput(e.cameraOptions,"far"),n.addInput(e.cameraOfOriginal.position,"x"),n.addInput(e.cameraOfOriginal.position,"y"),n.addInput(e.cameraOfOriginal.position,"z")},t=function(){var n=r.addFolder({title:"OrbitControls"});n.addInput(e.orbitControls,"enabled")};n(),t()}}},b=w,P=(n("c90e"),n("2877")),M=Object(P["a"])(b,s,o,!1,null,"00e93495",null),y=M.exports,j={name:"app",components:{PerspectiveTransform:y}},x=j,S=Object(P["a"])(x,i,a,!1,null,null,null),C=S.exports;t["a"].config.productionTip=!1,new t["a"]({render:function(e){return e(C)}}).$mount("#app")},6827:function(e,r,n){},c90e:function(e,r,n){"use strict";var t=n("6827"),i=n.n(t);i.a},f012:function(e,r,n){e.exports=n.p+"img/clock.8341b588.jpg"}});
//# sourceMappingURL=app.5f90a19e.js.map